# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/conf/fluent.conf.erb

#@include "#{ENV['FLUENTD_SYSTEMD_CONF'] || 'systemd'}.conf"
#@include "#{ENV['FLUENTD_PROMETHEUS_CONF'] || 'prometheus'}.conf"
# @include kubernetes.conf
#@include conf.d/*.conf

## Capture audit logs
#<match kube-apiserver-audit>
#  @type papertrail
#
#  papertrail_host "#{ENV['FLUENT_PAPERTRAIL_AUDIT_HOST']}"
#  papertrail_port "#{ENV['FLUENT_PAPERTRAIL_AUDIT_PORT']}"
#</match>

<source>
  @type tail
  @id in_tail_container_logs

  #path "#{ENV['FLUENT_CONTAINER_TAIL_PATH'] || '/var/log/containers/*.log'}"
  path /var/log/containers/*.log

  pos_file /var/log/fluentd-containers.log.pos
  # tag "#{ENV['FLUENT_CONTAINER_TAIL_TAG'] || 'kubernetes.*'}"
  tag containers
  # exclude_path "#{ENV['FLUENT_CONTAINER_TAIL_EXCLUDE_PATH'] || use_default}"
  read_from_head true

  # @include tail_container_parse.conf
  <parse>
    @type none
  </parse>
</source>

# <match **>
#   @type stdout
# </match>

<match **>
  @type papertrail
  @id out_papertrail

  papertrail_host "#{ENV['FLUENT_PAPERTRAIL_HOST']}"
  papertrail_port "#{ENV['FLUENT_PAPERTRAIL_PORT']}"
</match>
